<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Security.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Portfolio</a> &gt; <a href="index.source.html" class="el_package">com.maya.portfolio.model</a> &gt; <span class="el_source">Security.java</span></div><h1>Security.java</h1><pre class="source lang-java linenums">package com.maya.portfolio.model;

import java.io.Serializable;
import java.text.Collator;
import java.time.Instant;
import java.time.LocalDate;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;
import java.util.UUID;


public class Security {
 
<span class="pc" id="L16">    private List&lt;SecurityPrice&gt; prices = new ArrayList&lt;&gt;();</span>
    

    private static class TextUtil{

<span class="nc" id="L21">        private final static Collator COLLATOR = Collator.getInstance();</span>

        

        /* Performs a locale-sensitive comparison of two strings using Java Text
        * Collator.
        */
        public static int compare(String left, String right)
        {
<span class="nc bnc" id="L30" title="All 2 branches missed.">            if (left == right)</span>
<span class="nc" id="L31">                return 0;</span>
<span class="nc bnc" id="L32" title="All 2 branches missed.">            if (left == null)</span>
<span class="nc" id="L33">                return -1;</span>
<span class="nc bnc" id="L34" title="All 2 branches missed.">            if (right == null)</span>
<span class="nc" id="L35">                return 1;</span>

<span class="nc" id="L37">            return COLLATOR.compare(left, right);</span>
        }
    }

    public static final class ByName implements Comparator&lt;Security&gt;, Serializable
    {
        private static final long serialVersionUID = 1L;

        private final SecurityNameConfig config;

        public ByName()
        {
<span class="nc" id="L49">            this(SecurityNameConfig.NONE);</span>
<span class="nc" id="L50">        }</span>

        public ByName(SecurityNameConfig config)
<span class="nc" id="L53">        {</span>
<span class="nc" id="L54">            this.config = config;</span>
<span class="nc" id="L55">        }</span>

        @Override
        public int compare(Security s1, Security s2)
        {
<span class="nc bnc" id="L60" title="All 4 branches missed.">            if (s1 == null &amp;&amp; s2 == null)</span>
<span class="nc" id="L61">                return 0;</span>
<span class="nc bnc" id="L62" title="All 2 branches missed.">            else if (s1 == null)</span>
<span class="nc" id="L63">                return -1;</span>
<span class="nc bnc" id="L64" title="All 2 branches missed.">            else if (s2 == null)</span>
<span class="nc" id="L65">                return 1;</span>

<span class="nc" id="L67">            return TextUtil.compare(s1.getName(config), s2.getName(config));</span>
        }
    }

    private String uuid;
    private String onlineId;

    private String name;
<span class="pc" id="L75">    private String currencyCode = &quot;EUR&quot;;</span>
    private String targetCurrencyCode;

    private String note;

    private String isin;
    private String tickerSymbol;
    private String wkn;
    private String calendar;

    // feed and feedURL are used to update historical prices
    private String feed;
    private String feedURL;
    //private List&lt;SecurityPrice&gt; prices = new ArrayList&lt;&gt;();

    // latestFeed and latestFeedURL are used to update the latest (current)
    // quote. If null, the values from feed and feedURL are used instead.
    private String latestFeed;
    private String latestFeedURL;
    private LatestSecurityPrice latest;

    //private Attributes attributes;

    // private List&lt;SecurityEvent&gt; events;
    // private List&lt;SecurityProperty&gt; properties;
    private LocalDate date;
    private long value;


<span class="pc" id="L104">    private boolean isRetired = false;</span>

    /**
     * Stores ephemeral data related to the current session that is not
     * persisted.
     */
    private transient SecurityEphemeralData data; // NOSONAR

    private Instant updatedAt;


    public Security()
<span class="fc" id="L116">    {</span>
<span class="fc" id="L117">        this.uuid = UUID.randomUUID().toString();</span>
<span class="fc" id="L118">    }</span>

    public Security(String name, String currencyCode)
    {
<span class="nc" id="L122">        this();</span>
<span class="nc" id="L123">        this.name = name;</span>
<span class="nc" id="L124">        this.currencyCode = currencyCode;</span>
<span class="nc" id="L125">    }</span>

    public Security(String name, String isin, String tickerSymbol, String feed)
    {
<span class="nc" id="L129">        this();</span>
<span class="nc" id="L130">        this.name = name;</span>
<span class="nc" id="L131">        this.isin = isin;</span>
<span class="nc" id="L132">        this.tickerSymbol = tickerSymbol;</span>
<span class="nc" id="L133">        this.feed = feed;</span>
<span class="nc" id="L134">    }</span>

    /* package */ Security(String uuid)
<span class="nc" id="L137">    {</span>
<span class="nc" id="L138">        this.uuid = uuid;</span>
<span class="nc" id="L139">    }</span>

    public String getUUID()
    {
<span class="nc" id="L143">        return uuid;</span>
    }

    /* package */void generateUUID()
    {
        // needed to assign UUIDs when loading older versions from XML
<span class="nc" id="L149">        uuid = UUID.randomUUID().toString();</span>
<span class="nc" id="L150">    }</span>

    public void setTickerSymbol(String tickerSymbol)
    {
<span class="fc" id="L154">        this.tickerSymbol = tickerSymbol;</span>
<span class="fc" id="L155">        this.updatedAt = Instant.now();</span>
<span class="fc" id="L156">    }</span>

    public String getName()
    {
<span class="nc" id="L160">        return name;</span>
    }

    public String getName(SecurityNameConfig config)
    {
<span class="nc bnc" id="L165" title="All 5 branches missed.">        switch (config)</span>
        {
            case NONE:
<span class="nc" id="L168">                return name;</span>
            case ISIN:
<span class="nc bnc" id="L170" title="All 2 branches missed.">                return getIsin() != null ? getIsin() + &quot; (&quot; + name + &quot;)&quot; : name; //$NON-NLS-1$ //$NON-NLS-2$</span>
            case TICKER_SYMBOL:
<span class="nc bnc" id="L172" title="All 2 branches missed.">                return getTickerSymbol() != null ? getTickerSymbol() + &quot; (&quot; + name + &quot;)&quot; : name; //$NON-NLS-1$ //$NON-NLS-2$</span>
            case WKN:
<span class="nc bnc" id="L174" title="All 2 branches missed.">                return getWkn() != null ? getWkn() + &quot; (&quot; + name + &quot;)&quot; : name; //$NON-NLS-1$ //$NON-NLS-2$</span>
            default:
<span class="nc" id="L176">                throw new IllegalArgumentException(config.name());</span>
        }
    }

    public String getIsin()
    {
<span class="nc" id="L182">        return isin;</span>
    }

     public String getTickerSymbol()
    {
<span class="fc" id="L187">        return tickerSymbol;</span>
    }

    public String getWkn()
    {
<span class="nc" id="L192">        return wkn;</span>
    }

    public String getCurrencyCode()
    {
<span class="fc" id="L197">        return currencyCode;</span>
    }


    public List&lt;SecurityPrice&gt; getPrices()
    {
<span class="nc" id="L203">        return Collections.unmodifiableList(prices);</span>
    }

    public void setCurrencyCode(String currencyCode)
    {
<span class="fc" id="L208">        this.currencyCode = currencyCode;</span>
<span class="fc" id="L209">        this.updatedAt = Instant.now();</span>
<span class="fc" id="L210">    }</span>

    public SecurityEphemeralData getEphemeralData()
    {
<span class="nc bnc" id="L214" title="All 2 branches missed.">        if (data == null)</span>
<span class="nc" id="L215">            data = new SecurityEphemeralData();</span>
<span class="nc" id="L216">        return data;</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>